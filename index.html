<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>R√©servation de fauteuil ‚Äì PHENO&CO</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background: #050608;
      color: #f9fafb;
    }

    .page {
      max-width: 900px;
      margin: auto;
      padding: 24px 16px 40px;
    }

    h1, h2, h3 {
      color: #ffd42a;
      margin-top: 0;
    }

    h1 {
      text-align: center;
      margin-bottom: 16px;
    }

    p.intro {
      text-align: center;
      margin-bottom: 32px;
      opacity: 0.8;
    }

    .grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
    }

    @media (min-width: 820px) {
      .grid {
        grid-template-columns: 1.2fr 1fr;
      }
    }

    .card {
      background: #0b1220;
      border-radius: 16px;
      padding: 20px 18px;
      border: 1px solid #1f2937;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
    }

    label {
      display: block;
      font-size: 14px;
      margin-bottom: 6px;
      opacity: 0.9;
    }

    input[type="text"],
    input[type="email"],
    input[type="tel"],
    input[type="date"],
    input[type="time"],
    select,
    textarea {
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid #374151;
      background: #020617;
      color: #f9fafb;
      font-size: 14px;
      box-sizing: border-box;
      margin-bottom: 12px;
    }

    textarea {
      min-height: 70px;
      resize: vertical;
    }

    .radio-row {
      display: flex;
      gap: 12px;
      margin-bottom: 12px;
    }

    .radio-pill {
      flex: 1;
      border-radius: 999px;
      border: 1px solid #4b5563;
      padding: 10px 12px;
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      font-size: 14px;
      background: #020617;
    }

    .radio-pill input {
      margin: 0;
    }

    .radio-pill span {
      font-weight: 600;
    }

    .muted {
      font-size: 12px;
      opacity: 0.7;
    }

    .btn {
      width: 100%;
      padding: 14px;
      border-radius: 999px;
      border: none;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      margin-top: 6px;
    }

    .btn-primary {
      background: #ffd42a;
      color: #000;
    }

    .btn-secondary {
      background: #111827;
      color: #f9fafb;
      border: 1px solid #4b5563;
    }

    .summary-box {
      background: #020617;
      border-radius: 14px;
      border: 1px solid #4b5563;
      padding: 14px 14px 10px;
      margin-top: 10px;
      font-size: 14px;
    }

    .summary-box h3 {
      margin-bottom: 8px;
      font-size: 15px;
    }

    .summary-box ul {
      margin: 4px 0 8px;
      padding-left: 18px;
    }

    .summary-box li {
      margin-bottom: 2px;
    }

    .highlight {
      color: #22c55e;
      font-weight: bold;
    }

    .warning {
      font-size: 12px;
      color: #facc15;
      margin-top: 6px;
    }

    .checkbox-row {
      display: flex;
      align-items: flex-start;
      gap: 8px;
      margin-top: 8px;
      font-size: 13px;
    }

    .checkbox-row input {
      margin-top: 3px;
    }

    a.cgv-link {
      color: #ffd42a;
      text-decoration: underline;
      cursor: pointer;
    }

    .section-title {
      font-size: 16px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .section-title span.icon {
      font-size: 18px;
    }
  </style>
</head>
<body>
  <div class="page">
    <h1>R√©server un fauteuil</h1>
    <p class="intro">
      Choisissez vos dates, votre formule et vos options.<br />
      Vous recevrez un r√©capitulatif et la r√©servation sera confirm√©e apr√®s paiement de l‚Äôacompte.
    </p>

    <form id="reservation-form">
      <div class="grid">
        <!-- Colonne gauche : formulaire -->
        <div class="card">
          <div class="section-title">
            <span class="icon">üìÖ</span>
            <span>Dates de location</span>
          </div>

          <label for="date-debut">Date de d√©but *</label>
          <input type="date" id="date-debut" name="date_debut" required />

          <label for="date-fin">Date de fin (optionnel)</label>
          <input type="date" id="date-fin" name="date_fin" />

          <label for="heure-debut">Heure de d√©but *</label>
          <input type="time" id="heure-debut" name="heure_debut" required />

          <hr style="border: 0; border-top: 1px solid #1f2937; margin: 18px 0;" />

          <div class="section-title">
            <span class="icon">‚è±Ô∏è</span>
            <span>Type de location</span>
          </div>

          <label>Dur√©e de location *</label>
          <div class="radio-row">
            <label class="radio-pill">
              <input type="radio" name="duree" value="courte" checked />
              <div>
                <span>Courte dur√©e</span><br />
                <span class="muted">Heure, journ√©e, semaine ‚Ä¢ acompte 50&nbsp;%</span>
              </div>
            </label>
            <label class="radio-pill">
              <input type="radio" name="duree" value="longue" />
              <div>
                <span>Longue dur√©e</span><br />
                <span class="muted">1 √† 12 mois ‚Ä¢ acompte 25&nbsp;%</span>
              </div>
            </label>
          </div>

          <label for="formule-courte">Formule courte dur√©e *</label>
          <select id="formule-courte" name="formule_courte">
            <option value="heure">√Ä l'heure ‚Äî 10 ‚Ç¨ HT</option>
            <option value="demi">Demi-journ√©e (4h) ‚Äî 35 ‚Ç¨ HT</option>
            <option value="journee">Journ√©e ‚Äî 65 ‚Ç¨ HT</option>
            <option value="semaine">Semaine ‚Äî 260 ‚Ç¨ HT</option>
          </select>

          <label for="formule-longue">Formule longue dur√©e *</label>
          <select id="formule-longue" name="formule_longue" disabled>
            <option value="1mois">1 mois ‚Äî 65 ‚Ç¨ HT/jour</option>
            <option value="3mois">3 mois ‚Äî 60 ‚Ç¨ HT/jour</option>
            <option value="6mois">6 mois ‚Äî 55 ‚Ç¨ HT/jour</option>
            <option value="12mois">12 mois ‚Äî 50 ‚Ç¨ HT/jour</option>
          </select>

          <label for="pack-materiel">Pack mat√©riel</label>
          <select id="pack-materiel" name="pack_materiel">
            <option value="aucun">Aucun</option>
            <option value="essentiel">Pack Essentiel ‚Äî 20 ‚Ç¨ HT</option>
            <option value="premium">Pack Premium ‚Äî 30 ‚Ç¨ HT</option>
          </select>

          <div class="warning">
            Les montants calcul√©s sont indicatifs pour une journ√©e de location.
            Pour plusieurs jours ou une saison, le calcul se fait au prorata selon la grille tarifaire.
          </div>
        </div>

        <!-- Colonne droite : infos + r√©cap -->
        <div class="card">
          <div class="section-title">
            <span class="icon">üë§</span>
            <span>Vos informations</span>
          </div>

          <label for="nom">Nom complet *</label>
          <input type="text" id="nom" name="nom" required />

          <label for="email">Email *</label>
          <input type="email" id="email" name="email" required />

          <label for="telephone">T√©l√©phone *</label>
          <input type="tel" id="telephone" name="telephone" required />

          <label for="commentaire">Commentaire (optionnel)</label>
          <textarea id="commentaire" name="commentaire" placeholder="Pr√©cisez par exemple votre exp√©rience, vos besoins, vos jours de pr√©sence souhait√©s‚Ä¶"></textarea>

          <div class="checkbox-row">
            <input type="checkbox" id="cgv" required />
            <label for="cgv">
              J‚Äôaccepte les
              <a href="#cgv-details" class="cgv-link">conditions g√©n√©rales de vente</a>
              et je comprends que la r√©servation est confirm√©e apr√®s paiement de l‚Äôacompte.
            </label>
          </div>

          <div id="summary" class="summary-box">
            <h3>R√©capitulatif (indicatif)</h3>
            <div id="summary-content">
              Remplissez le formulaire pour voir le d√©tail de votre r√©servation.
            </div>
          </div>

          <button type="button" class="btn btn-secondary" id="btn-update">
            Mettre √† jour le r√©capitulatif
          </button>

          <button type="submit" class="btn btn-primary">
            Envoyer ma demande via WhatsApp
          </button>
        </div>
      </div>
    </form>

    <!-- CGV tr√®s simplifi√©es -->
    <div id="cgv-details" class="card" style="margin-top: 24px;">
      <h2>Conditions g√©n√©rales de location (r√©sum√©)</h2>
      <ul>
        <li>La r√©servation est confirm√©e uniquement apr√®s paiement de l‚Äôacompte (50&nbsp;% pour les locations courtes, 25&nbsp;% pour les locations longues).</li>
        <li>Les tarifs indiqu√©s sont hors taxes. La TVA applicable sera ajout√©e lors de la facturation.</li>
        <li>Le locataire est responsable de son activit√©, de sa client√®le, de son assurance professionnelle et du respect des r√®gles d‚Äôhygi√®ne.</li>
        <li>Tout mat√©riel mis √† disposition doit √™tre utilis√© et entretenu avec soin. En cas de casse manifeste par n√©gligence, un remplacement pourra √™tre factur√©.</li>
        <li>En cas d‚Äôannulation moins de 72h avant la date de d√©but, l‚Äôacompte peut √™tre conserv√© √† titre de d√©dommagement.</li>
        <li>PHENO&CO se r√©serve le droit de refuser ou d‚Äôinterrompre une location en cas de non-respect des valeurs du salon ou des r√®gles de fonctionnement.</li>
      </ul>
      <p class="muted">
        La version compl√®te des conditions pourra √™tre envoy√©e par mail avec le contrat de location.
      </p>
    </div>
  </div>

  <script>
    const dureeRadios = document.querySelectorAll('input[name="duree"]');
    const selectCourte = document.getElementById('formule-courte');
    const selectLongue = document.getElementById('formule-longue');
    const summaryContent = document.getElementById('summary-content');
    const btnUpdate = document.getElementById('btn-update');
    const form = document.getElementById('reservation-form');

    function getPrixHT() {
      const duree = document.querySelector('input[name="duree"]:checked').value;
      const pack = document.getElementById('pack-materiel').value;

      let baseHT = 0;
      let formuleLabel = '';
      let acompteTaux = duree === 'courte' ? 0.5 : 0.25;

      if (duree === 'courte') {
        switch (selectCourte.value) {
          case 'heure':
            baseHT = 10;
            formuleLabel = "√Ä l'heure ‚Äî 10 ‚Ç¨ HT";
            break;
          case 'demi':
            baseHT = 35;
            formuleLabel = "Demi-journ√©e (4h) ‚Äî 35 ‚Ç¨ HT";
            break;
          case 'journee':
            baseHT = 65;
            formuleLabel = "Journ√©e ‚Äî 65 ‚Ç¨ HT";
            break;
          case 'semaine':
            baseHT = 260;
            formuleLabel = "Semaine ‚Äî 260 ‚Ç¨ HT";
            break;
        }
      } else {
        switch (selectLongue.value) {
          case '1mois':
            baseHT = 65;
            formuleLabel = "1 mois ‚Äî 65 ‚Ç¨ HT/jour";
            break;
          case '3mois':
            baseHT = 60;
            formuleLabel = "3 mois ‚Äî 60 ‚Ç¨ HT/jour";
            break;
          case '6mois':
            baseHT = 55;
            formuleLabel = "6 mois ‚Äî 55 ‚Ç¨ HT/jour";
            break;
          case '12mois':
            baseHT = 50;
            formuleLabel = "12 mois ‚Äî 50 ‚Ç¨ HT/jour";
            break;
        }
      }

      let packHT = 0;
      let packLabel = "Aucun pack mat√©riel";
      if (pack === 'essentiel') {
        packHT = 20;
        packLabel = "Pack Essentiel ‚Äî 20 ‚Ç¨ HT";
      } else if (pack === 'premium') {
        packHT = 30;
        packLabel = "Pack Premium ‚Äî 30 ‚Ç¨ HT";
      }

      const totalHT = baseHT + packHT; // pour une journ√©e
      const tva = totalHT * 0.2;
      const totalTTC = totalHT + tva;
      const acompteTTC = totalTTC * acompteTaux;
      const soldeTTC = totalTTC - acompteTTC;

      return {
        duree,
        formuleLabel,
        packLabel,
        baseHT,
        packHT,
        totalHT,
        tva,
        totalTTC,
        acompteTTC,
        soldeTTC,
        acompteTaux
      };
    }

    function updateSummary() {
      const dateDebut = document.getElementById('date-debut').value || '-';
      const dateFin = document.getElementById('date-fin').value || 'Non pr√©cis√©';
      const heureDebut = document.getElementById('heure-debut').value || '-';

      const infoPrix = getPrixHT();

      summaryContent.innerHTML = `
        <ul>
          <li><strong>Du :</strong> ${dateDebut} <strong>au</strong> ${dateFin}</li>
          <li><strong>Heure de d√©but :</strong> ${heureDebut}</li>
          <li><strong>Formule :</strong> ${infoPrix.formuleLabel}</li>
          <li><strong>Pack :</strong> ${infoPrix.packLabel}</li>
        </ul>
        <p>
          <strong>Tarif indicatif pour 1 journ√©e :</strong><br/>
          ‚Ä¢ Base : ${infoPrix.baseHT.toFixed(2)} ‚Ç¨ HT<br/>
          ‚Ä¢ Pack : ${infoPrix.packHT.toFixed(2)} ‚Ç¨ HT<br/>
          ‚Ä¢ Total : ${infoPrix.totalHT.toFixed(2)} ‚Ç¨ HT
          (TVA 20 % : ${infoPrix.tva.toFixed(2)} ‚Ç¨)<br/>
          <span class="highlight">
            ‚Ä¢ Total TTC : ${infoPrix.totalTTC.toFixed(2)} ‚Ç¨ TTC<br/>
            ‚Ä¢ Acompte (${(infoPrix.acompteTaux * 100).toFixed(0)} %) : ${infoPrix.acompteTTC.toFixed(2)} ‚Ç¨ TTC<br/>
            ‚Ä¢ Solde restant : ${infoPrix.soldeTTC.toFixed(2)} ‚Ç¨ TTC
          </span>
        </p>
        <p class="muted">
          Pour plusieurs jours, semaines ou mois, le montant total sera ajust√©
          selon la dur√©e r√©elle de location et la grille tarifaire.
        </p>
      `;
    }

    // Gestion courte / longue dur√©e
    dureeRadios.forEach(r => {
      r.addEventListener('change', () => {
        if (r.value === 'courte' && r.checked) {
          selectCourte.disabled = false;
          selectLongue.disabled = true;
        } else if (r.value === 'longue' && r.checked) {
          selectCourte.disabled = true;
          selectLongue.disabled = false;
        }
        updateSummary();
      });
    });

    // Mise √† jour du r√©cap
    btnUpdate.addEventListener('click', updateSummary);
    selectCourte.addEventListener('change', updateSummary);
    selectLongue.addEventListener('change', updateSummary);
    document.getElementById('pack-materiel').addEventListener('change', updateSummary);
    document.getElementById('date-debut').addEventListener('change', updateSummary);
    document.getElementById('date-fin').addEventListener('change', updateSummary);
    document.getElementById('heure-debut').addEventListener('change', updateSummary);

    // Soumission ‚Üí WhatsApp
    form.addEventListener('submit', function (e) {
      e.preventDefault();

      if (!document.getElementById('cgv').checked) {
        alert("Merci de lire et d‚Äôaccepter les CGV avant de valider votre demande.");
        return;
      }

      updateSummary();
      const prix = getPrixHT();

      const nom = document.getElementById('nom').value;
      const email = document.getElementById('email').value;
      const tel = document.getElementById('telephone').value;
      const commentaire = document.getElementById('commentaire').value || '‚Äî';

      const duree = document.querySelector('input[name="duree"]:checked').value;
      const dateDebut = document.getElementById('date-debut').value || '-';
      const dateFin = document.getElementById('date-fin').value || 'Non pr√©cis√©';
      const heureDebut = document.getElementById('heure-debut').value || '-';

      const message = `
Nouvelle demande de location de fauteuil ‚Äì PHENO&CO

Identit√© :
- Nom : ${nom}
- Email : ${email}
- T√©l√©phone : ${tel}

P√©riode souhait√©e :
- Du ${dateDebut} au ${dateFin}
- Heure de d√©but : ${heureDebut}
- Type de dur√©e : ${duree === 'courte' ? 'Courte dur√©e' : 'Longue dur√©e'}

Formule :
- ${prix.formuleLabel}
- ${prix.packLabel}

Estimation pour 1 journ√©e :
- Total HT : ${prix.totalHT.toFixed(2)} ‚Ç¨ HT
- Total TTC : ${prix.totalTTC.toFixed(2)} ‚Ç¨ TTC
- Acompte (${(prix.acompteTaux * 100).toFixed(0)} %) : ${prix.acompteTTC.toFixed(2)} ‚Ç¨ TTC

Commentaire :
${commentaire}

√Ä valider ensemble selon la dur√©e exacte et le contrat de location.
      `.trim();

      const encoded = encodeURIComponent(message);
      const whatsappUrl = `https://wa.me/33769432605?text=${encoded}`;

      window.open(whatsappUrl, '_blank');
    });

    // Initialisation
    updateSummary();
  </script>
</body>
</html>
