<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>PHENO&CO ‚Äî Barbershop depuis 2009</title>
<meta name="color-scheme" content="dark light">
<style>
  :root{
    --bg:#0a0a0a;--card:#12151b;--line:#1f2530;--fg:#f3f4f6;--muted:#aeb4be;
    --yellow:#ffd400;--yellow-2:#ffea73;--accent:#25D366;--danger:#ff7272;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--fg);text-align:center}
  header{padding:28px 18px}
  h1{margin:10px 0 8px;font-size:2.2rem;color:var(--yellow);letter-spacing:.5px}
  .sub{margin:0;color:#d9d9d9}
  .nav{display:flex;flex-direction:column;gap:16px;align-items:center;justify-content:center;margin:18px auto 22px;max-width:560px}
  .btn{display:block;width:92%;padding:18px 22px;border-radius:18px;font-weight:800;text-decoration:none;font-size:1.1rem;line-height:1.2;transition:transform .07s ease, box-shadow .15s ease}
  .btn:focus-visible{outline:0;box-shadow:0 0 0 4px #222,0 0 0 6px var(--yellow)}
  .btn:hover{transform:translateY(-1px)}
  .btn-yellow{background:var(--yellow);color:#000}
  .btn-grey{background:#3a3f49;color:#fff}

  footer{padding:18px;color:#9aa3ad;border-top:1px solid #191c22;font-size:.9rem}

  /* Panneaux fa√ßon app (modaux ‚Äúplein √©cran‚Äù) */
  .panel{position:fixed;inset:0;display:none;background:rgba(0,0,0,.45);z-index:999}
  .panel[open]{display:block}
  .sheet{position:absolute;inset:auto 0 0 0;background:var(--card);border-top:1px solid var(--line);
         border-radius:18px 18px 0 0;max-height:92vh;overflow:auto;box-shadow:0 -30px 60px rgba(0,0,0,.35)}
  .sheet header{position:sticky;top:0;background:linear-gradient(#151923,#12151b);border-bottom:1px solid var(--line);padding:14px 16px;text-align:left}
  .sheet h2{margin:0;color:var(--yellow)}
  .close{position:absolute;right:14px;top:12px;border:0;background:#1a1f29;color:#fff;padding:8px 10px;border-radius:10px}
  .container{padding:16px;max-width:860px;margin:0 auto;text-align:left}

  /* Cartes & champs */
  .card{background:#0f131a;border:1px solid var(--line);border-radius:16px;padding:18px;margin:12px 0}
  .card h3{margin:0 0 10px;display:flex;align-items:center;gap:10px;color:var(--yellow)}
  label{display:block;margin:8px 0 6px}
  input,select,textarea{width:100%;padding:14px;border-radius:14px;border:1px solid #2a3341;background:#0e1118;color:#fff;font-size:16px;transition:border-color .15s, box-shadow .15s}
  input:focus,select:focus,textarea:focus{border-color:var(--yellow);box-shadow:0 0 0 3px rgba(255,212,0,.25)}
  textarea{min-height:90px;resize:vertical}
  .row{display:grid;gap:12px}
  @media(min-width:680px){.row{grid-template-columns:1fr 1fr}}

  /* Accord√©ons (pour ‚Äúpetit mat√©riel‚Äù) */
  details{border:1px solid var(--line);border-radius:14px;background:#0f131a;margin:10px 0}
  summary{cursor:pointer;list-style:none;padding:14px 16px;border-radius:14px}
  summary::marker, summary::-webkit-details-marker{display:none}
  details[open]{border-color:#2c3646}
  details[open] summary{box-shadow:inset 0 0 0 2px var(--yellow)}
  .acc-body{padding:10px 16px 14px}

  /* R√©cap & CGV */
  .summary-box{border:1px dashed #313949;border-radius:12px;padding:12px;background:#0c1016;margin-top:8px}
  .tag{display:inline-block;background:#1c2230;border:1px solid #2b3546;border-radius:999px;padding:2px 8px;margin-right:6px;color:#c7ced7;font-size:12px}

  .actions{display:flex;flex-wrap:wrap;gap:10px;margin:16px 0}
  .btn-a{flex:1;min-width:180px;border:0;border-radius:14px;padding:14px 16px;font-weight:800;cursor:pointer}
  .a-primary{background:var(--yellow);color:#000}
  .a-sec{background:#3a3f49;color:#fff}

  .note{font-size:12px;color:#aeb4be}
  .ok{color:#9eea9e}.warn{color:#ffd27a}.err{color:var(--danger)}

  /* Petit header en haut de page */
  .topline{color:#c2c7cf;font-size:.9rem;opacity:.7}
</style>
</head>
<body>
  <header>
    <div class="topline">PHENO&CO</div>
    <h1>PHENO&CO</h1>
    <p class="sub">Barbershop ‚Ä¢ Depuis 2009 ‚Ä¢ Montpellier</p>
  </header>

  <!-- 2 boutons (seulement) -->
  <nav class="nav" aria-label="Actions principales">
    <a class="btn btn-yellow" href="#" id="openRent">Louer un fauteuil</a>
    <a class="btn btn-grey" href="https://phenoandco.com" target="_blank" rel="noopener">R√©server une coiffure</a>
  </nav>

  <footer>¬© 2025 PHENO&CO. Tous droits r√©serv√©s.</footer>

  <!-- ============ PANNEAU ‚ÄúAPP‚Äù : LOUER ============ -->
  <dialog class="panel" id="rentPanel">
    <div class="sheet" role="dialog" aria-modal="true" aria-labelledby="rentTitle">
      <header>
        <h2 id="rentTitle">R√©servation fauteuil</h2>
        <button class="close" id="closeRent">Fermer ‚úï</button>
      </header>

      <div class="container">
        <form id="rentForm" autocomplete="on" novalidate>
          <!-- DATES -->
          <div class="card">
            <h3>üìÖ Dates de location</h3>
            <div class="row">
              <div>
                <label for="startDate">Date de d√©but *</label>
                <input id="startDate" type="date" required>
              </div>
              <div>
                <label for="endDate">Date de fin</label>
                <input id="endDate" type="date">
              </div>
            </div>
            <div class="row">
              <div>
                <label for="startTime">Heure d‚Äôarriv√©e *</label>
                <select id="startTime" required>
                  <option value="">Choisir l‚Äôheure</option>
                  <option>10:00</option><option>11:00</option><option>12:00</option>
                  <option>13:00</option><option>14:00</option><option>15:00</option>
                  <option>16:00</option><option>17:00</option><option>18:00</option>
                </select>
              </div>
              <div>
                <label for="hoursPerDay">Heures par jour</label>
                <select id="hoursPerDay">
                  <option>1</option><option>2</option><option>3</option><option selected>4</option>
                  <option>5</option><option>6</option><option>7</option><option>8</option><option>9</option><option>10</option>
                </select>
              </div>
            </div>
          </div>

          <!-- FORMULES -->
          <div class="card">
            <h3>‚è±Ô∏è Formule</h3>
            <div class="row">
              <div>
                <label for="shortF">Courte dur√©e (HT)</label>
                <select id="shortF">
                  <option value="">‚Äî Choisir ‚Äî</option>
                  <option value="hour">1h ‚Äî 10 ‚Ç¨</option>
                  <option value="halfday">¬Ω journ√©e (4h) ‚Äî 45 ‚Ç¨</option>
                  <option value="fullday">1 journ√©e (8h) ‚Äî 70 ‚Ç¨</option>
                  <option value="week">1 semaine (5 jours) ‚Äî 280 ‚Ç¨</option>
                </select>
              </div>
              <div>
                <label for="longF">Longue dur√©e (‚Ç¨/jour HT)</label>
                <select id="longF">
                  <option value="">‚Äî Choisir ‚Äî</option>
                  <option value="m1">1 mois ‚Äî 65 ‚Ç¨/jour + redevance 2%</option>
                  <option value="m3">3 mois ‚Äî 60 ‚Ç¨/jour + redevance 2%</option>
                  <option value="m6">6 mois ‚Äî 55 ‚Ç¨/jour + redevance 2%</option>
                  <option value="m12">12 mois ‚Äî 50 ‚Ç¨/jour + redevance 2%</option>
                </select>
                <p class="note">Le total est calcul√© automatiquement (base 20 jours/mois). La redevance 2% s‚Äôapplique sur le solde TTC.</p>
              </div>
            </div>
          </div>

          <!-- MAT√âRIEL (ACCORD√âON) -->
          <div class="card">
            <h3>üß∞ Mat√©riel (optionnel)</h3>
            <details>
              <summary>Pack / pi√®ces ‚Äî appuyer pour ouvrir</summary>
              <div class="acc-body">
                <div class="row">
                  <div>
                    <label for="q-clipper">Tondeuse classique ‚Äî 10 ‚Ç¨/jour</label>
                    <select id="q-clipper"><option value="0" selected>0</option><option>1</option><option>2</option></select>
                  </div>
                  <div>
                    <label for="q-trimmer">Tondeuse finition ‚Äî 8 ‚Ç¨/jour</label>
                    <select id="q-trimmer"><option value="0" selected>0</option><option>1</option><option>2</option></select>
                  </div>
                </div>
                <div class="row">
                  <div>
                    <label for="q-shaver">Shaver ‚Äî 6 ‚Ç¨/jour</label>
                    <select id="q-shaver"><option value="0" selected>0</option><option>1</option><option>2</option></select>
                  </div>
                  <div>
                    <label for="q-dryer">S√®che-cheveux ‚Äî 8 ‚Ç¨/jour</label>
                    <select id="q-dryer"><option value="0" selected>0</option><option>1</option><option>2</option></select>
                  </div>
                </div>
                <div class="row">
                  <div>
                    <label for="q-cape">Cape ‚Äî 1 ‚Ç¨/jour</label>
                    <select id="q-cape"><option value="0" selected>0</option><option>1</option><option>2</option><option>3</option></select>
                  </div>
                  <div>
                    <label for="q-towel">Serviettes (4) ‚Äî 4 ‚Ç¨/jour</label>
                    <select id="q-towel"><option value="0" selected>0</option><option>1</option><option>2</option><option>3</option></select>
                  </div>
                </div>
                <div class="row">
                  <div>
                    <label for="q-pack-ess">Pack Essentiel ‚Äî 20 ‚Ç¨/jour</label>
                    <select id="q-pack-ess"><option value="0" selected>0</option><option>1</option></select>
                  </div>
                  <div>
                    <label for="q-pack-prem">Pack Premium ‚Äî 30 ‚Ç¨/jour</label>
                    <select id="q-pack-prem"><option value="0" selected>0</option><option>1</option></select>
                  </div>
                </div>
              </div>
            </details>
          </div>

          <!-- IDENTIT√â -->
          <div class="card">
            <h3>üë§ Vos informations</h3>
            <div class="row">
              <div>
                <label for="name">Nom complet *</label>
                <input id="name" placeholder="Votre nom et pr√©nom" required>
              </div>
              <div>
                <label for="email">Email *</label>
                <input id="email" type="email" placeholder="votre.email@exemple.fr" required>
              </div>
            </div>
            <div class="row">
              <div>
                <label for="phone">T√©l√©phone *</label>
                <input id="phone" inputmode="tel" placeholder="06 12 34 56 78" required>
              </div>
              <div>
                <label for="note">Commentaire (optionnel)</label>
                <input id="note" placeholder="Infos compl√©mentaires‚Ä¶">
              </div>
            </div>
            <label style="display:flex;gap:8px;align-items:center;margin-top:8px">
              <input type="checkbox" id="cgv" required>
              <span>J‚Äôaccepte les <a href="#" id="showCgv">conditions g√©n√©rales de vente</a> *</span>
            </label>
          </div>

          <!-- R√âCAP -->
          <div class="card">
            <h3>üßæ R√©capitulatif</h3>
            <div class="summary-box" id="recap">
              Mise √† jour en direct‚Ä¶
            </div>
            <div class="actions">
              <button type="submit" class="btn-a a-primary">Confirmer & envoyer</button>
              <button type="button" class="btn-a a-sec" id="whatsOnly">WhatsApp seulement</button>
            </div>
            <div class="note" id="statusNote">Pr√™t.</div>
          </div>
        </form>
      </div>
    </div>
  </dialog>

  <!-- ================= JS ================= -->
  <!-- EmailJS (client) -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
  <script>
  /******** CONFIG ********/
  const PHONE_WA = '33769432605'; // 07 69 43 26 05
  const EMAIL_ADMIN = 'location.phenoandco@gmail.com';

  // Tes identifiants CourrielJS/EmailJS
  const EJ_PUBLIC  = 'ufHEQuZ93VPkUtFld';
  const EJ_SERVICE = 'service_llizndy';
  // On propose un template par d√©faut. S‚Äôil n‚Äôexiste pas chez toi, on bascule en fallback automatique (mailto + WhatsApp).
  const EJ_TEMPLATE = 'template_pheno';

  const TVA = 0.20;
  const WORK_DAYS_PER_MONTH = 20;

  const SHORT = {
    hour:     { label:'1h',                pricePerHour: 10 },
    halfday:  { label:'¬Ω journ√©e (4h)',    fixedPerBlock: 45, hoursPerDay:4 },
    fullday:  { label:'1 journ√©e (8h)',    fixedPerBlock: 70, hoursPerDay:8 },
    week:     { label:'1 semaine (5 jours)', fixedPerBlock: 280, daysPerBlock:5 }
  };
  const LONG = {
    m1:  { label:'1 mois',  months:1,  perDay:65 },
    m3:  { label:'3 mois',  months:3,  perDay:60 },
    m6:  { label:'6 mois',  months:6,  perDay:55 },
    m12: { label:'12 mois', months:12, perDay:50 }
  };
  const GEAR = [
    { id:'q-clipper',   label:'Tondeuse classique',  price:10 },
    { id:'q-trimmer',   label:'Tondeuse finition',   price:8  },
    { id:'q-shaver',    label:'Shaver',              price:6  },
    { id:'q-dryer',     label:'S√®che-cheveux',       price:8  },
    { id:'q-cape',      label:'Cape',                price:1  },
    { id:'q-towel',     label:'Serviettes (lot 4)',  price:4  },
    { id:'q-pack-ess',  label:'Pack Essentiel',      price:20 },
    { id:'q-pack-prem', label:'Pack Premium',        price:30 }
  ];
  const fmt = new Intl.NumberFormat('fr-FR',{style:'currency',currency:'EUR'});
  const $ = s => document.querySelector(s);
  const byId = id => document.getElementById(id);

  // Ouverture/fermeture panneau
  const panel = byId('rentPanel');
  byId('openRent').onclick = (e)=>{ e.preventDefault(); panel.setAttribute('open',''); };
  byId('closeRent').onclick = ()=> panel.removeAttribute('open');

  // Champs
  const f = {
    startDate: byId('startDate'),
    endDate  : byId('endDate'),
    startTime: byId('startTime'),
    hoursPerDay: byId('hoursPerDay'),
    shortF: byId('shortF'),
    longF:  byId('longF'),
    name: byId('name'),
    email: byId('email'),
    phone: byId('phone'),
    note:  byId('note'),
    cgv:   byId('cgv'),
    recap: byId('recap'),
    status:byId('statusNote')
  };

  // Dates init
  const today = new Date();
  const pad2 = n => String(n).padStart(2,'0');
  const toYMD = d => `${d.getFullYear()}-${pad2(d.getMonth()+1)}-${pad2(d.getDate())}`;
  f.startDate.value = toYMD(today);
  f.endDate.value   = toYMD(today);

  // Exclusivit√© formules + aides
  function lockFormulas() {
    if (f.shortF.value) { f.longF.value=''; f.hoursPerDay.disabled = (f.shortF.value==='halfday'||f.shortF.value==='fullday'); if(f.shortF.value==='halfday') f.hoursPerDay.value='4'; if(f.shortF.value==='fullday') f.hoursPerDay.value='8'; }
    else if (f.longF.value){ f.shortF.value=''; f.hoursPerDay.disabled=false; }
    else { f.hoursPerDay.disabled=false; }
    updateRecap();
  }
  f.shortF.onchange = lockFormulas;
  f.longF.onchange  = lockFormulas;

  function parseDate(v){ return v ? new Date(v+'T00:00:00') : null; }
  function daysInclusive(a,b){ const A=new Date(a.getFullYear(),a.getMonth(),a.getDate()); const B=new Date(b.getFullYear(),b.getMonth(),b.getDate()); return Math.max(1, Math.floor((B-A)/86400000)+1); }

  function compute(){
    let sd = parseDate(f.startDate.value) || new Date();
    let ed = parseDate(f.endDate.value)   || sd;
    if (ed < sd) ed = sd;
    const days = daysInclusive(sd,ed);
    const hours = Number(f.hoursPerDay.value||0);

    let mode='‚Äî', months=0, formulaLabel='‚Äî', baseHt=0, autoEnd='';

    if (f.shortF.value){
      mode='Courte dur√©e';
      const k=f.shortF.value, d=SHORT[k];
      formulaLabel=d.label;
      if (k==='hour') baseHt = days*hours*SHORT.hour.pricePerHour;
      else if (k==='halfday' || k==='fullday') baseHt = days*(d.fixedPerBlock);
      else if (k==='week')  { const w = Math.ceil(days/d.daysPerBlock); baseHt = w*d.fixedPerBlock; }
    }
    else if (f.longF.value){
      mode='Longue dur√©e';
      const d=LONG[f.longF.value];
      months=d.months;
      formulaLabel=`${d.label} ‚Äî ${d.perDay} ‚Ç¨ / jour (HT) + redevance 2%`;
      baseHt=d.perDay*WORK_DAYS_PER_MONTH*d.months;
      const end=new Date(sd.getFullYear(), sd.getMonth()+d.months, sd.getDate());
      autoEnd = ` (‚âà fin ${toYMD(end)})`;
    }

    // Mat√©riel
    let gearHt=0, gearList=[];
    GEAR.forEach(g=>{
      const q = Number(byId(g.id).value||0);
      if(q>0){ gearList.push(`${g.label} √ó${q}`); }
      const mult = months>0 ? (WORK_DAYS_PER_MONTH*months) : days;
      gearHt += g.price*q*mult;
    });

    const totalHt = baseHt + gearHt;
    const tva = totalHt*TVA;
    const ttc = totalHt + tva;
    const depositRate = (mode==='Longue dur√©e')? 0.25 : 0.50;
    const depositTtc = ttc*depositRate;
    const soldeTtc = ttc - depositTtc;
    let fee = 0, ttcPerDayFinal = null, equivalence='‚Äî';
    if(mode==='Longue dur√©e'){
      fee = soldeTtc*0.02;
      const totalDays = WORK_DAYS_PER_MONTH*Math.max(1,months);
      ttcPerDayFinal = (ttc+fee)/totalDays;
      equivalence = `‚âà ${(depositTtc/ttcPerDayFinal).toFixed(1)} jour(s) couverts`;
    }else if(mode==='Courte dur√©e'){
      // √©quivalence simple (en jours √† 84‚Ç¨ ou 67,2‚Ç¨ TTC)
      let perDayTtc = 84; // par d√©faut journ√©e
      if(f.shortF.value==='week') perDayTtc = 67.2;
      if(f.shortF.value==='hour') { equivalence = `‚âà ${(depositTtc/12).toFixed(1)} h couvertes`; }
      else                        { equivalence = `‚âà ${(depositTtc/perDayTtc).toFixed(1)} jour(s) couverts`; }
    }

    return { sd, ed, days, hours, mode, months, formulaLabel, autoEnd,
             gearList, gearHt, totalHt, tva, ttc, depositRate, depositTtc, soldeTtc, fee, ttcPerDayFinal };
  }

  function periodText(sd,ed,arr){ return `${toYMD(sd)} ‚Üí ${toYMD(ed)} (arriv√©e ${arr||'-'})`; }

  function updateRecap(){
    const c = compute();
    const lines = [];
    lines.push(`<b>P√©riode :</b> ${periodText(c.sd,c.ed,f.startTime.value)}${c.autoEnd}`);
    lines.push(`<b>Formule :</b> ${c.mode} ‚Äî ${c.formulaLabel}`);
    lines.push(`<b>Heures/jour :</b> ${c.hours}`);
    lines.push(`<b>Mat√©riel :</b> ${c.gearList.join(', ') || '‚Äî'}`);
    lines.push(`<b>Total HT :</b> ${fmt.format(c.totalHt)} ‚Ä¢ <b>TVA 20% :</b> ${fmt.format(c.tva)} ‚Ä¢ <b>Total TTC :</b> ${fmt.format(c.ttc)}`);
    lines.push(`<b>Acompte ${c.mode==='Longue dur√©e'?'25%':'50%'} :</b> ${fmt.format(c.depositTtc)} ‚Ä¢ <span class="tag">Solde TTC : ${fmt.format(c.soldeTtc)}</span>`);
    if(c.mode==='Longue dur√©e'){
      lines.push(`<span class="tag">Redevance 2% : ${fmt.format(c.fee)}</span> <span class="tag">TTC/jour final : ${c.ttcPerDayFinal?fmt.format(c.ttcPerDayFinal):'‚Äî'}</span>`);
    }
    f.recap.innerHTML = lines.map(l=>`<div>${l}</div>`).join('');
  }

  // Listeners
  ['input','change'].forEach(ev=>{
    [f.startDate,f.endDate,f.startTime,f.hoursPerDay,f.shortF,f.longF].forEach(el=> el.addEventListener(ev,updateRecap));
    GEAR.forEach(g=> byId(g.id).addEventListener('change',updateRecap));
  });
  updateRecap();

  /******** Envois ********/
  function buildMessage(c){
    return `Demande de location ‚Äî PHENO&CO
Nom: ${f.name.value}
T√©l√©phone: ${f.phone.value}
Email: ${f.email.value}

P√©riode: ${periodText(c.sd,c.ed,f.startTime.value)}${c.autoEnd}
Formule: ${c.mode} ‚Äî ${c.formulaLabel}
Heures/jour: ${c.hours}

Loyer:
‚Ä¢ Total HT: ${fmt.format(c.totalHt)} ‚Ä¢ TVA: ${fmt.format(c.tva)} ‚Ä¢ Total TTC: ${fmt.format(c.ttc)}
Acompte (${c.mode==='Longue dur√©e'?'25%':'50%'}): ${fmt.format(c.depositTtc)} ‚Äî Solde TTC: ${fmt.format(c.soldeTtc)}
${c.mode==='Longue dur√©e' ? `Redevance 2%: ${fmt.format(c.fee)} ‚Ä¢ TTC/jour final: ${c.ttcPerDayFinal?fmt.format(c.ttcPerDayFinal):'‚Äî'}` : ''}

Mat√©riel: ${c.gearList.join(', ') || '-'}
CGV: accept√© ‚úÖ`;
  }

  function openWhatsApp(c){
    const msg = buildMessage(c);
    window.open(`https://wa.me/${PHONE_WA}?text=${encodeURIComponent(msg)}`,'_blank','noopener');
  }

  async function tryEmailJS(c){
    try{
      if (!emailjs) throw new Error('lib non charg√©e');
      emailjs.init(EJ_PUBLIC);
      const params = {
        to_email: EMAIL_ADMIN,
        to_name: 'PHENO&CO',
        from_email: f.email.value,
        from_name: f.name.value,
        phone: f.phone.value,
        message: buildMessage(c)
      };
      const res = await emailjs.send(EJ_SERVICE, EJ_TEMPLATE, params);
      return res && res.status===200;
    }catch(e){
      return false; // on laissera le fallback faire le job
    }
  }

  function fallbackMailto(c){
    const subject = `Demande de location ‚Äî ${f.name.value||''}`;
    const body = buildMessage(c);
    window.open(`mailto:${EMAIL_ADMIN}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`,'_blank');
  }

  byId('whatsOnly').onclick = ()=>{ const c=compute(); openWhatsApp(c); };

  byId('rentForm').addEventListener('submit', async (e)=>{
    e.preventDefault();
    if(!(f.name.value && f.phone.value && f.email.value && f.cgv.checked && (f.shortF.value||f.longF.value))){
      f.status.innerHTML = 'Compl√®te les champs obligatoires et accepte les CGV.'; f.status.className='note err'; return;
    }
    const c = compute();

    f.status.innerHTML = 'Envoi en cours‚Ä¶'; f.status.className='note warn';

    // 1) WhatsApp (temps r√©el chez toi)
    openWhatsApp(c);

    // 2) EmailJS ‚Üí si KO, fallback mailto
    const ok = await tryEmailJS(c);
    if(ok){ f.status.innerHTML = 'WhatsApp ouvert + e-mail envoy√© ‚úÖ'; f.status.className='note ok'; }
    else  { fallbackMailto(c); f.status.innerHTML = 'WhatsApp ouvert + e-mail via client (fallback).'; f.status.className='note ok'; }
  });

  // CGV (version courte, cliquable)
  byId('showCgv').onclick = (e)=>{
    e.preventDefault();
    alert(`CGV ‚Äî PHENO&CO (extrait)

Objet : location de fauteuils et mat√©riels au salon (18 rue d‚ÄôAlger, Montpellier).
Tarifs : courte dur√©e (heure/¬Ω journ√©e/journ√©e/semaine) et longue dur√©e (mensuel/trimestriel/semestriel/annuel), exprim√©s en HT & TTC.
Acomptes : courte dur√©e = 50% TTC ; longue dur√©e = 25% TTC (loyers pay√©s d‚Äôavance, d√©ductibles du solde).
Redevance 2% : appliqu√©e en longue dur√©e sur le solde TTC (apr√®s acompte), factur√©e mensuellement (acc√®s espace perso).
Locataire : hygi√®ne/s√©curit√©, RC Pro, sinc√©rit√© du CA, pas de sous-location.
Bailleur : mise √† disposition conforme, maintenance lourde, confidentialit√©.
Annulation courte dur√©e : ‚â§48h ‚Üí acompte non rembours√© mais reportable une fois.
Longue dur√©e : pr√©avis 1 mois (ou imm√©diate en cas de faute grave).
Litiges : m√©diation amiable puis tribunaux de Montpellier.`);
  };
  </script>
</body>
</html>
