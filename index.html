<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>PHENO&CO ‚Äî R√©servation de fauteuil</title>
<meta name="color-scheme" content="dark light">
<style>
  :root{--bg:#000;--fg:#fff;--muted:#bdbdbd;--yellow:#ffd400;--grey:#444;--green:#25D366;--focus:#8ab4f8}
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--fg);text-align:center}
  header{padding:24px}
  header img{width:180px;margin-bottom:12px}
  h1{color:var(--yellow);margin:0;font-size:2.2rem}
  .sub{margin:6px 0 20px;color:#ddd}
  /* NAV : boutons VERTICAUX */
  .nav{display:flex;flex-direction:column;gap:18px;align-items:center;justify-content:center;margin:0 auto 28px}
  .btn{display:block;width:80%;max-width:520px;padding:18px 22px;border-radius:18px;font-weight:800;text-decoration:none;font-size:1.15rem;line-height:1.2}
  .btn:focus-visible{outline:3px solid var(--focus);outline-offset:2px}
  .btn-yellow{background:var(--yellow);color:#000}
  .btn-grey{background:var(--grey);color:#fff}
  .btn-green{background:var(--green);color:#fff}
  .btn:hover{opacity:.95}
  footer{padding:22px;color:#aaa;font-size:.85rem}

  /* MODAL via :target */
  .modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;padding:18px;z-index:999}
  .modal:target{display:flex}
  .box{max-width:920px;width:100%;background:#0f0f0f;border:1px solid #222;border-radius:18px;padding:18px;max-height:88vh;overflow:auto;text-align:left}
  .box h2{margin:0 0 10px;color:var(--yellow);text-align:center}
  .close{display:inline-block;margin-top:12px;padding:10px 14px;background:#222;border:1px solid #333;border-radius:10px;color:#fff;text-decoration:none}

  /* FORM */
  label{display:block;margin:10px 0 6px}
  input,select,textarea{width:100%;padding:12px;border-radius:12px;border:1px solid #2a2a2a;background:#121212;color:#fff;font-size:16px}
  textarea{min-height:96px;resize:vertical}
  .row{display:grid;gap:12px}
  @media(min-width:680px){.row{grid-template-columns:1fr 1fr}}
  .section-title{font-weight:900;color:#fff;margin:12px 0 6px}
  .accent{color:#000;background:var(--yellow);padding:2px 8px;border-radius:8px;margin-left:8px}
  .prices-hint{margin-top:6px;color:#000;background:var(--yellow);display:inline-block;padding:4px 10px;border-radius:999px;font-weight:900}
  .small{font-size:12px;color:#9aa0a6}
  .summary{border-top:1px dashed #2b2b2b;margin-top:16px;padding-top:12px;color:#e6e6e6}
  .summary small{color:var(--muted)}
  ul.packs{list-style:none;padding:0;margin:0;display:grid;gap:8px}
  .actions{display:flex;gap:12px;margin-top:16px;flex-wrap:wrap}
  .btn-submit,.btn-reset{flex:1;min-width:160px;padding:14px 16px;border-radius:14px;border:none;font-weight:800;cursor:pointer}
  .btn-submit{background:var(--yellow);color:#000}
  .btn-reset{background:var(--grey);color:#fff}
</style>
</head>
<body>
  <header>
    <img src="1.png" alt="Logo PHENO&CO" onerror="this.style.display='none'">
    <h1>PHENO&CO</h1>
    <p class="sub">Barbershop ‚Ä¢ Depuis 2009 ‚Ä¢ Montpellier</p>
  </header>

  <nav class="nav" aria-label="Actions principales">
    <a class="btn btn-yellow" href="#reserver">R√©server Fauteuil üí∫</a>
    <a class="btn btn-grey" href="https://phenoandco.com" target="_blank" rel="noopener">Prendre RDV Coiffure üíà</a>
    <a class="btn btn-green" href="https://wa.me/33769432605?text=Bonjour%20PHENO%26CO%20!" target="_blank" rel="noopener">Contact WhatsApp</a>
  </nav>

  <footer>¬© 2025 PHENO&CO. Tous droits r√©serv√©s.</footer>

  <!-- ===== MODAL FORMULAIRE ===== -->
  <div class="modal" id="reserver" aria-hidden="true">
    <div class="box" role="dialog" aria-modal="true" aria-labelledby="title-fauteuil">
      <h2 id="title-fauteuil">R√©server un fauteuil</h2>
      <p class="small">Dates 100% compatibles (menus Jour/Mois/Ann√©e). Formules avec tarifs. Packs ‚Äúpetit mat√©riel en location‚Äù.</p>

      <form id="chairForm" autocomplete="on" novalidate>
        <!-- Identit√© -->
        <div class="row">
          <div><label for="f-name">Nom et pr√©nom</label><input id="f-name" required placeholder="Ex. Jean Dupont"></div>
          <div><label for="f-phone">T√©l√©phone</label><input id="f-phone" required inputmode="tel" placeholder="Ex. 06 12 34 56 78"></div>
        </div>

        <!-- P√©riode -->
        <div class="row">
          <div>
            <label>Date de d√©but</label>
            <div class="row">
              <select id="sd-day"></select><select id="sd-month"></select><select id="sd-year"></select>
            </div>
          </div>
          <div>
            <label for="f-start-time">Heure d‚Äôarriv√©e (10:00‚Äì18:00)</label>
            <select id="f-start-time" required>
              <option>10:00</option><option>11:00</option><option>12:00</option><option>13:00</option>
              <option>14:00</option><option>15:00</option><option>16:00</option><option>17:00</option><option>18:00</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div>
            <label>Date de fin</label>
            <div class="row">
              <select id="ed-day"></select><select id="ed-month"></select><select id="ed-year"></select>
            </div>
          </div>
          <div>
            <label for="f-hours-per-day">Heures par jour</label>
            <select id="f-hours-per-day" required>
              <option value="0.5">0,5 h</option><option value="1">1 h</option><option value="1.5">1,5 h</option><option value="2">2 h</option>
              <option value="2.5">2,5 h</option><option value="3">3 h</option><option value="3.5">3,5 h</option><option value="4">4 h</option>
              <option value="4.5">4,5 h</option><option value="5">5 h</option><option value="5.5">5,5 h</option><option value="6">6 h</option>
              <option value="6.5">6,5 h</option><option value="7">7 h</option><option value="7.5">7,5 h</option><option value="8">8 h</option>
            </select>
            <div class="small">Ex. 4h = 10:00 ‚Üí 14:00</div>
          </div>
        </div>

        <!-- Formule -->
        <div class="section-title">Formule <span class="accent">tarifs</span></div>
        <label for="f-formula">Choisir une formule (HT)</label>
        <select id="f-formula" required>
          <option value="">S√©lectionner‚Ä¶</option>
          <option value="hour">Horaire ‚Äî 1h = 10,00 ‚Ç¨ HT</option>
          <option value="halfday">Demi-journ√©e ‚Äî 4h = 40,00 ‚Ç¨ HT</option>
          <option value="fullday">Journ√©e ‚Äî 8h = 80,00 ‚Ç¨ HT</option>
          <option value="week">Semaine ‚Äî 40h = 400,00 ‚Ç¨ HT</option>
          <option value="month">Mois ‚Äî 160h = 1 600,00 ‚Ç¨ HT</option>
        </select>
        <div class="prices-hint">Horaire 10‚Ç¨/h ‚Ä¢ 1/2j 40‚Ç¨ ‚Ä¢ 1j 80‚Ç¨ ‚Ä¢ 1 sem. 400‚Ç¨ ‚Ä¢ 1 mois 1600‚Ç¨ (HT)</div>

        <!-- Packs -->
        <div class="section-title">Packs petit mat√©riel <span class="accent">en location</span></div>
        <ul class="packs">
          <li><label><input type="checkbox" name="packs" value="5"> Pack Tondeuse Pro ‚Äî 5,00 ‚Ç¨ HT</label></li>
          <li><label><input type="checkbox" name="packs" value="8"> Pack Produits ‚Äî 8,00 ‚Ç¨ HT</label></li>
          <li><label><input type="checkbox" name="packs" value="4"> Pack Serviettes ‚Äî 4,00 ‚Ç¨ HT</label></li>
        </ul>

        <!-- CGV -->
        <label style="display:flex;align-items:center;gap:8px;margin-top:14px">
          <input type="checkbox" id="f-cgv" required>
          <span>J‚Äôai lu et j‚Äôaccepte les CGV & contrat.</span>
        </label>

        <!-- R√©sum√© -->
        <div class="summary">
          <div><small>P√©riode :</small> <span id="sum-period">‚Äî</span></div>
          <div><small>Jours compt√©s :</small> <span id="sum-days">0</span></div>
          <div><small>Heures/jour :</small> <span id="sum-hpd">0</span></div>
          <div><small>Dur√©e totale :</small> <span id="sum-hours">0 h</span></div>
          <div><small>Base HT :</small> <span id="sum-base">0 ‚Ç¨</span></div>
          <div><small>Packs HT :</small> <span id="sum-packs">0 ‚Ç¨</span></div>
          <div><small>Total HT :</small> <span id="sum-ht">0 ‚Ç¨</span></div>
          <div><small>TVA (20%) :</small> <span id="sum-tva">0 ‚Ç¨</span></div>
          <div><b>Total TTC :</b> <span id="sum-ttc">0 ‚Ç¨</span></div>
          <div><small>Acompte 50% :</small> <span id="sum-deposit">0 ‚Ç¨</span></div>
        </div>

        <!-- Actions -->
        <div class="actions">
          <button class="btn-submit" type="submit">Confirmer & envoyer (WhatsApp)</button>
          <button class="btn-reset" type="reset" id="resetBtn">Effacer</button>
          <a id="emailLink" class="btn btn-grey" href="#" target="_blank" rel="noopener">Envoyer aussi par e-mail</a>
        </div>

        <!-- Fermer le modal (sans JS) -->
        <a href="#" class="close">Fermer</a>
      </form>
    </div>
  </div>

<script>
/* ========= CONFIG ========= */
const PHONE = '33769432605';
const EMAIL = 'location.phenoandco@gmail.com';
const HOURLY_HT = 10;
const TVA_RATE = 0.20;

/* ========= OUTILS ========= */
const ‚Ç¨ = new Intl.NumberFormat('fr-FR',{style:'currency',currency:'EUR'});
const id = s=>document.getElementById(s);

/* ========= SELECTEURS J/M/A ========= */
const sdDay=id('sd-day'), sdMonth=id('sd-month'), sdYear=id('sd-year');
const edDay=id('ed-day'), edMonth=id('ed-month'), edYear=id('ed-year');

function fillDMY(daySel, monthSel, yearSel){
  daySel.innerHTML=''; monthSel.innerHTML=''; yearSel.innerHTML='';
  for(let d=1; d<=31; d++) daySel.add(new Option(String(d).padStart(2,'0'),String(d).padStart(2,'0')));
  ['01','02','03','04','05','06','07','08','09','10','11','12'].forEach(m=>monthSel.add(new Option(m,m)));
  const y=new Date().getFullYear(); [y,y+1].forEach(Y=>yearSel.add(new Option(String(Y),String(Y))));
}
function ymd(d,m,y){ return `${y.value}-${m.value}-${d.value}`; }

function initSelectors(){
  fillDMY(sdDay,sdMonth,sdYear);
  fillDMY(edDay,edMonth,edYear);
  const t=new Date();
  sdDay.value=String(t.getDate()).padStart(2,'0');
  sdMonth.value=String(t.getMonth()+1).padStart(2,'0');
  sdYear.value=String(t.getFullYear());
  edDay.value=sdDay.value; edMonth.value=sdMonth.value; edYear.value=sdYear.value;
  id('f-start-time').value='10:00';
  id('f-hours-per-day').value='4';
  id('f-formula').value='';
}
initSelectors();

/* ========= CALCULS ========= */
function daysBetweenInclusive(a,b){
  const A=new Date(a), B=new Date(b); A.setHours(0,0,0,0); B.setHours(0,0,0,0);
  return Math.max(0, Math.floor((B-A)/86400000)+1);
}
function sumPacks(){ return [...document.querySelectorAll('input[name="packs"]:checked')].reduce((s,el)=>s+Number(el.value),0); }
function compute(){
  const sd=ymd(sdDay,sdMonth,sdYear), ed=ymd(edDay,edMonth,edYear);
  const st=id('f-start-time').value, hpd=parseFloat(id('f-hours-per-day').value||'0')||0;
  const key=id('f-formula').value;
  const unit = key==='hour'?1 : key==='halfday'?4 : key==='fullday'?8 : key==='week'?40 : key==='month'?160 : 0;
  const days=daysBetweenInclusive(sd,ed);
  const requested=days*hpd;
  const baseHours=(key==='hour')?requested:Math.ceil((requested||0)/unit)*unit;
  const baseHt=baseHours*HOURLY_HT, packsHt=sumPacks();
  const totalHt=baseHt+packsHt, tva=totalHt*TVA_RATE, ttc=totalHt+tva, deposit=ttc*0.5;
  return {sd,ed,st,hpd,days,requested,baseHt,packsHt,totalHt,tva,ttc,deposit,key};
}
function updateAll(){
  const c=compute();
  id('sum-period').textContent=(c.sd&&c.ed)?`${c.sd} ‚Üí ${c.ed} (arriv√©e ${c.st||'‚Äî'})`:'‚Äî';
  id('sum-days').textContent=c.days;
  id('sum-hpd').textContent=(c.hpd||0).toString().replace('.',',');
  id('sum-hours').textContent=`${(c.requested||0).toLocaleString('fr-FR')} h`;
  id('sum-base').textContent=‚Ç¨.format(c.baseHt||0);
  id('sum-packs').textContent=‚Ç¨.format(c.packsHt||0);
  id('sum-ht').textContent=‚Ç¨.format(c.totalHt||0);
  id('sum-tva').textContent=‚Ç¨.format(c.tva||0);
  id('sum-ttc').textContent=‚Ç¨.format(c.ttc||0);
  id('sum-deposit').textContent=‚Ç¨.format(c.deposit||0);

  const label = c.key==='hour'?'Horaire' : c.key==='halfday'?'Demi-journ√©e (4h)' : c.key==='fullday'?'Journ√©e (8h)' : c.key==='week'?'Semaine (40h)' : c.key==='month'?'Mois (160h)' : '‚Äî';
  const subject=encodeURIComponent(`Demande de location de fauteuil ‚Äî ${id('f-name').value||''}`);
  const body=encodeURIComponent(
`Demande de location ‚Äî PHENO&CO
Nom: ${id('f-name').value||'-'}
T√©l√©phone: ${id('f-phone').value||'-'}
P√©riode: du ${c.sd||'-'} ${c.st||'-'} au ${c.ed||'-'}
Heures/jour: ${c.hpd||0}
Formule: ${label}
Packs HT: ${‚Ç¨.format(c.packsHt||0)}
Total HT: ${‚Ç¨.format(c.totalHt||0)}
TVA 20%: ${‚Ç¨.format(c.tva||0)}
Total TTC: ${‚Ç¨.format(c.ttc||0)}
Acompte 50%: ${‚Ç¨.format(c.deposit||0)}
Message: ${document.getElementById('f-note')?.value||'-'}`);
  document.getElementById('emailLink').href=`mailto:${EMAIL}?subject=${subject}&body=${body}`;
}

/* ========= LISTENERS ========= */
['change','input'].forEach(evt=>{
  [sdDay,sdMonth,sdYear,edDay,edMonth,edYear,id('f-start-time'),id('f-hours-per-day'),id('f-formula')]
    .forEach(el=>el.addEventListener(evt,updateAll));
});
document.querySelectorAll('input[name="packs"]').forEach(el=>el.addEventListener('change',updateAll));
document.getElementById('resetBtn').onclick=()=>setTimeout(updateAll,0);

/* ========= SUBMIT ========= */
document.getElementById('chairForm').addEventListener('submit',(e)=>{
  e.preventDefault();
  const c=compute();
  if(!(document.getElementById('f-name').value.trim() && document.getElementById('f-phone').value.trim() && c.sd && c.ed && document.getElementById('f-formula').value)){
    alert('Merci de remplir identit√©, p√©riode et formule.'); return;
  }
  if(!document.getElementById('f-cgv').checked){ alert('Merci d‚Äôaccepter les CGV & contrat.'); return; }

  const label = document.getElementById('f-formula').selectedOptions[0].text.split(' ‚Äî ')[0];
  const msg =
`Demande de location de fauteuil ‚Äî PHENO&CO
‚Ä¢ Nom: ${document.getElementById('f-name').value.trim()}
‚Ä¢ T√©l√©phone: ${document.getElementById('f-phone').value.trim()}
‚Ä¢ P√©riode: ${c.sd} ‚Üí ${c.ed} (arriv√©e ${c.st})
‚Ä¢ Heures/jour: ${c.hpd}
‚Ä¢ Formule: ${label}
‚Ä¢ Base HT: ${‚Ç¨.format(c.baseHt)}
‚Ä¢ Packs HT: ${‚Ç¨.format(c.packsHt)}
‚Ä¢ Total HT: ${‚Ç¨.format(c.totalHt)}
‚Ä¢ TVA: ${‚Ç¨.format(c.tva)}
‚Ä¢ Total TTC: ${‚Ç¨.format(c.ttc)}
‚Ä¢ Acompte 50%: ${‚Ç¨.format(c.deposit)}
‚Ä¢ Message: ${(document.getElementById('f-note')?.value||'-').trim()}

CGV/Contrat: accept√© ‚úÖ
Merci d‚Äôenvoyer le lien de paiement 50%.`;
  window.open(`https://wa.me/${PHONE}?text=${encodeURIComponent(msg)}`,'_blank','noopener');
});
</script>
</body>
</html>
